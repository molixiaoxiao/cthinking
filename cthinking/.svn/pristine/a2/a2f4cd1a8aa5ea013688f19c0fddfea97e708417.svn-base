<?php
	include "../sqlclass/sqlclass.php";
	$mysql = new mySql();
	$sql = "select * from self_test";
	$mysql->query($sql);
	$resInfo = $mysql->getnext();
	$i = 0;
	while ($resInfo != '0') {
		$id[$i] = $resInfo->id;
		//ans是题目的正确答案
		$ans[$i] = $resInfo->answer;
		$question[$i] = $resInfo->question;
		$i++;
		$resInfo = $mysql->getnext();
	}
	$mysql->close();
	for($j=0;$j<$i;$j++)
	{
		//res是用户提交的答案
		if(array_key_exists("No".($j+1),$_POST))
		{
			$res[$j] = $_POST["No".($j+1)];
			if($res[$j] == $ans[$j])
			{
				$flag[$j] = "√";
			}
			else
			{
				$flag[$j] = "×";
			}
		}
		else
		{
			$res[$j] = "-1";
			$flag[$j] = "×";
		}

	}
?>

<style type="text/css">
.correct{color: red;}
.incorrect{color: green;}
</style>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>自我测试</title>
<link href="../style.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="../css/lrtk.css" />
<link href="../css/cupertino/jquery-ui-1.8.18.custom.css" rel="stylesheet" />
<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/jquery.imgbox.pack.js"></script>
<script type="text/javascript" src="../js/works.js"></script>
<script type="text/javascript" src="../js/login.js"></script>
<script type="text/javascript" src="../js/demo.js"></script>
<script type="text/javascript" src="../js/jquery-ui-1.8.18.custom.min.js"></script>
<script type="text/javascript" src="../js/login_chceck.js"></script>
</head>
<body>

<div class="rightpart">
	<div class="innerframe">
		<table border="0" width="600">
			<tr>
				<th>题号</th>
				<th>内容</th>
				<th width="28" align="left">提交</th>
				<th width="28" align="left">结果</th>
			</tr>
			<?php
				$i = 0;
				while (array_key_exists($i, $id)) {
					# code...
					echo "<tr>";
					echo "<td>".$id[$i]."、</td>";
					echo "<td>".$question[$i]."</td>";
					if($res[$i] == 1)
					{
						echo "<td align=\"center\">T</td>";
					}
					else if($res[$i] == 0)
					{
						echo "<td align=\"center\">N</td>";
					}
					else
					{
						echo "<td align=\"center\">&nbsp;</td>";
					}
					if($flag[$i] == "√")
					{
						echo "<td class=\"correct\" align=\"center\">".$flag[$i]."</td>";
					}
					else
					{
						echo "<td class=\"incorrect\" align=\"center\">".$flag[$i]."</td>";
					}
					echo "</tr>";
					$i++;
				}
			?>
		</table>
	</div>    
</div>
</body>
</html>